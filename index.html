<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Student Management System</title>

<!-- Bootstrap & Icons -->
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
<link href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css" rel="stylesheet">

<style>
/* =======================
   BODY & BACKGROUND
======================= */
body {
  background: linear-gradient(135deg, #cfe0ff, #ffffff);
  font-family: "Segoe UI", Tahoma, Geneva, Verdana, sans-serif;
  min-height: 100vh;
}

/* =======================
   HEADER
======================= */
.header {
  text-align: center;
  margin: 20px 0;
}
.header h2 {
  font-weight: 700;
  color: #0d6efd;
}
.header p {
  color: #6c757d;
  font-size: 14px;
}

/* =======================
   LAYOUT
======================= */
.main-container {
  display: flex;
  gap: 20px;
  flex-wrap: wrap;
}

/* Form card */
.card-form {
  flex: 1 1 300px;
  min-width: 300px;
  background-color: #ffffff;
  border-radius: 15px;
  box-shadow: 0 8px 20px rgba(0,0,0,0.08);
  padding: 24px;
}

/* Table card */
.card-table {
  flex: 2 1 600px;
  min-width: 300px;
  background-color: #ffffff;
  border-radius: 15px;
  box-shadow: 0 8px 20px rgba(0,0,0,0.08);
  padding: 24px;
}

/* =======================
   FORM
======================= */
.form-label {
  font-weight: 600;
}
.form-control, .form-select {
  border-radius: 10px;
}
.form-control[readonly] {
  background-color: #e9ecef;
  cursor: not-allowed;
}
.btn {
  border-radius: 10px;
  font-weight: 600;
  transition: all 0.2s;
}
.btn-primary:hover {
  background-color: #0b5ed7;
}
.btn-secondary:hover {
  background-color: #6c757d;
}

/* =======================
   TABLE
======================= */
.table {
  border-radius: 12px;
  overflow: hidden;
}
.table thead {
  background: linear-gradient(90deg, #0d6efd, #1980ff);
  color: #fff;
}
.table thead th {
  text-align: center;
}
.table tbody td {
  text-align: center;
}
.table-hover tbody tr:hover {
  background-color: #f1f5ff;
}
.minor {
  background-color: #fff3cd !important;
}

/* =======================
   MOBILE
======================= */
@media(max-width: 992px){
  .main-container {
    flex-direction: column;
  }
}
@media(max-width: 576px){
  .table, thead, tbody, th, td, tr {
    display: block;
  }
  thead { display: none; }
  tbody tr {
    margin-bottom: 15px;
    border: 1px solid #dee2e6;
    border-radius: 12px;
    padding: 12px;
    background-color: #ffffff;
  }
  tbody td {
    display: flex;
    justify-content: space-between;
    padding: 6px 0;
    font-size: 14px;
    border: none;
  }
  tbody td::before {
    content: attr(data-label);
    font-weight: 600;
    color: #6c757d;
  }
  tbody td:last-child {
    justify-content: flex-start;
    gap: 8px;
  }
}
</style>
</head>

<body class="container py-4">

<div class="header">
  <h2>ðŸŽ“ Student Management System</h2>
  <p>Midterm Activity 3 â€“ JavaScript CRUD</p>
</div>

<div class="main-container">
  <!-- FORM -->
  <div class="card-form">
    <h5 class="mb-3 text-primary">Student Form</h5>
    <form id="studentForm" novalidate>

      <div class="mb-3">
        <label class="form-label">Student ID (Edit Only)</label>
        <input type="text" id="studentId" class="form-control" readonly>
      </div>

      <div class="mb-3">
        <label class="form-label">Last Name</label>
        <input type="text" id="lastName" class="form-control" required>
      </div>

      <div class="mb-3">
        <label class="form-label">First Name</label>
        <input type="text" id="firstName" class="form-control" required>
      </div>

      <div class="mb-3">
        <label class="form-label">Middle Name</label>
        <input type="text" id="middleName" class="form-control">
      </div>

      <div class="mb-3">
        <label class="form-label">Birthdate</label>
        <input type="date" id="birthdate" class="form-control" required>
      </div>

      <div class="mb-3">
        <label class="form-label">Course</label>
        <select id="course" class="form-select" required>
          <option value="">Select Course</option>
          <option>BSIT</option>
          <option>BSCS</option>
          <option>BSEMC</option>
          <option>BSA</option>
          <option>BSBA</option>
          <option>BSHM</option>
          <option>BSTM</option>
          <option>BEED</option>
          <option>BSED</option>
          <option>BSN</option>
          <option>Criminology</option>
        </select>
      </div>

      <div class="mb-3">
        <label class="form-label">Year Level</label>
        <select id="yearLevel" class="form-select" required>
          <option value="">Select Year Level</option>
          <option>1st Year</option>
          <option>2nd Year</option>
          <option>3rd Year</option>
          <option>4th Year</option>
        </select>
      </div>

      <div class="d-flex justify-content-end gap-2">
        <button type="submit" class="btn btn-primary" id="submitBtn">
          <i class="bi bi-plus-circle"></i> Add Student
        </button>
        <button type="button" class="btn btn-secondary" id="cancelBtn" style="display:none;">
          <i class="bi bi-x-circle"></i> Cancel
        </button>
      </div>
    </form>
  </div>

  <!-- TABLE -->
  <div class="card-table">
    <h5 class="mb-3 text-primary">Student List</h5>
    <table class="table table-bordered table-hover">
      <thead>
        <tr>
          <th>#</th>
          <th>Student ID</th>
          <th>Name</th>
          <th>Age</th>
          <th>Course</th>
          <th>Year Level</th>
          <th>Actions</th>
        </tr>
      </thead>
      <tbody id="studentTable"></tbody>
    </table>
  </div>
</div>

<script>
// ========================
// ELEMENTS
// ========================
const form = document.getElementById("studentForm");
const table = document.getElementById("studentTable");
const submitBtn = document.getElementById("submitBtn");
const cancelBtn = document.getElementById("cancelBtn");

const studentId = document.getElementById("studentId");
const lastName = document.getElementById("lastName");
const firstName = document.getElementById("firstName");
const middleName = document.getElementById("middleName");
const birthdate = document.getElementById("birthdate");
const course = document.getElementById("course");
const yearLevel = document.getElementById("yearLevel");

let students = [];
let editIndex = null;

function calculateAge(date) {
  const birth = new Date(date);
  const today = new Date();
  let age = today.getFullYear() - birth.getFullYear();
  const m = today.getMonth() - birth.getMonth();
  if (m < 0 || (m === 0 && today.getDate() < birth.getDate())) age--;
  return age;
}

function displayStudents() {
  table.innerHTML = "";
  students.forEach((s, i) => {
    const age = calculateAge(s.birthdate);
    const row = document.createElement("tr");
    if(age < 18) row.classList.add("minor");
    row.innerHTML = `
      <td data-label="#">${i+1}</td>
      <td data-label="Student ID">${s.studentId||'-'}</td>
      <td data-label="Name">${s.lastName}, ${s.firstName} ${s.middleName}</td>
      <td data-label="Age">${age}</td>
      <td data-label="Course">${s.course}</td>
      <td data-label="Year Level">${s.yearLevel}</td>
      <td data-label="Actions">
        <button class="btn btn-warning btn-sm" onclick="editStudent(${i})">
          <i class="bi bi-pencil"></i>
        </button>
        <button class="btn btn-danger btn-sm" onclick="deleteStudent(${i})">
          <i class="bi bi-trash"></i>
        </button>
      </td>
    `;
    table.appendChild(row);
  });
}

form.addEventListener("submit", function(e){
  e.preventDefault();
  if(!form.checkValidity()){
    form.classList.add("was-validated");
    return;
  }

  if(editIndex!==null && !studentId.value.trim()){
    alert("Student ID is required when editing.");
    return;
  }

  const student = {
    studentId: studentId.value.trim(),
    lastName: lastName.value.trim(),
    firstName: firstName.value.trim(),
    middleName: middleName.value.trim(),
    birthdate: birthdate.value,
    course: course.value,
    yearLevel: yearLevel.value
  };

  if(editIndex===null){
    students.push(student);
  }else{
    students[editIndex] = student;
    editIndex=null;
  }

  resetForm();
  displayStudents();
});

function editStudent(index){
  const s = students[index];
  studentId.value = s.studentId;
  studentId.removeAttribute("readonly");
  lastName.value = s.lastName;
  firstName.value = s.firstName;
  middleName.value = s.middleName;
  birthdate.value = s.birthdate;
  course.value = s.course;
  yearLevel.value = s.yearLevel;
  editIndex = index;

  submitBtn.innerHTML = '<i class="bi bi-check-circle"></i> Update Student';
  cancelBtn.style.display="inline-block";
}

cancelBtn.addEventListener("click", resetForm);

function deleteStudent(index){
  if(confirm("Delete this student?")){
    students.splice(index,1);
    displayStudents();
  }
}

function resetForm(){
  form.reset();
  form.classList.remove("was-validated");
  studentId.value="";
  studentId.setAttribute("readonly",true);
  submitBtn.innerHTML='<i class="bi bi-plus-circle"></i> Add Student';
  cancelBtn.style.display="none";
}
</script>

</body>
</html>
